(function(){var a=[].indexOf||function(c){for(var d=0,f=this.length;d<f;d++){if(d in this&&this[d]===c){return d}}return -1},b=[].slice;!function(c,d){return"function"==typeof define&&define.amd?define("waypoints",["jquery"],function(e){return d(e,c)}):d(c.jQuery,c)}(window,function(B,x){var D,A,C,t,I,q,G,J,E,H,z,j,m,k,F,e;return D=B(x),J=a.call(x,"ontouchstart")>=0,t={horizontal:{},vertical:{}},I=1,G={},q="waypoints-context-id",z="resize.waypoints",j="scroll.waypoints",m=1,k="waypoints-waypoint-ids",F="waypoint",e="waypoints",A=function(){function c(d){var f=this;this.$element=d,this.element=d[0],this.didResize=!1,this.didScroll=!1,this.id="context"+I++,this.oldScroll={x:d.scrollLeft(),y:d.scrollTop()},this.waypoints={horizontal:{},vertical:{}},this.element[q]=this.id,G[this.id]=this,d.bind(j,function(){var g;if(!f.didScroll&&!J){return f.didScroll=!0,g=function(){return f.doScroll(),f.didScroll=!1},x.setTimeout(g,B[e].settings.scrollThrottle)}}),d.bind(z,function(){var g;if(!f.didResize){return f.didResize=!0,g=function(){return B[e]("refresh"),f.didResize=!1},x.setTimeout(g,B[e].settings.resizeThrottle)}})}return c.prototype.doScroll=function(){var d,f=this;return d={horizontal:{newScroll:this.$element.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.$element.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}},!J||d.vertical.oldScroll&&d.vertical.newScroll||B[e]("refresh"),B.each(d,function(n,p){var h,s,g;return g=[],s=p.newScroll>p.oldScroll,h=s?p.forward:p.backward,B.each(f.waypoints[n],function(o,r){var u,l;return p.oldScroll<(u=r.offset)&&u<=p.newScroll?g.push(r):p.newScroll<(l=r.offset)&&l<=p.oldScroll?g.push(r):void 0}),g.sort(function(i,l){return i.offset-l.offset}),s||g.reverse(),B.each(g,function(i,l){if(l.options.continuous||i===g.length-1){return l.trigger([h])}})}),this.oldScroll={x:d.horizontal.newScroll,y:d.vertical.newScroll}},c.prototype.refresh=function(){var f,h,g,d=this;return g=B.isWindow(this.element),h=this.$element.offset(),this.doScroll(),f={horizontal:{contextOffset:g?0:h.left,contextScroll:g?0:this.oldScroll.x,contextDimension:this.$element.width(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:g?0:h.top,contextScroll:g?0:this.oldScroll.y,contextDimension:g?B[e]("viewportHeight"):this.$element.height(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}},B.each(f,function(i,l){return B.each(d.waypoints[i],function(u,w){var p,y,n,v,K;if(p=w.options.offset,n=w.offset,y=B.isWindow(w.element)?0:w.$element.offset()[l.offsetProp],B.isFunction(p)?p=p.apply(w.element):"string"==typeof p&&(p=parseFloat(p),w.options.offset.indexOf("%")>-1&&(p=Math.ceil(l.contextDimension*p/100))),w.offset=y-l.contextOffset+l.contextScroll-p,(!w.options.onlyOnScroll||null==n)&&w.enabled){return null!==n&&n<(v=l.oldScroll)&&v<=w.offset?w.trigger([l.backward]):null!==n&&n>(K=l.oldScroll)&&K>=w.offset?w.trigger([l.forward]):null===n&&l.oldScroll>=w.offset?w.trigger([l.forward]):void 0}})})},c.prototype.checkEmpty=function(){if(B.isEmptyObject(this.waypoints.horizontal)&&B.isEmptyObject(this.waypoints.vertical)){return this.$element.unbind([z,j].join(" ")),delete G[this.id]}},c}(),C=function(){function c(f,h,g){var d,l;"bottom-in-view"===g.offset&&(g.offset=function(){var i;return i=B[e]("viewportHeight"),B.isWindow(h.element)||(i=h.$element.height()),i-B(this).outerHeight()}),this.$element=f,this.element=f[0],this.axis=g.horizontal?"horizontal":"vertical",this.callback=g.handler,this.context=h,this.enabled=g.enabled,this.id="waypoints"+m++,this.offset=null,this.options=g,h.waypoints[this.axis][this.id]=this,t[this.axis][this.id]=this,d=null!=(l=this.element[k])?l:[],d.push(this.id),this.element[k]=d}return c.prototype.trigger=function(d){if(this.enabled){return null!=this.callback&&this.callback.apply(this.element,d),this.options.triggerOnce?this.destroy():void 0}},c.prototype.disable=function(){return this.enabled=!1},c.prototype.enable=function(){return this.context.refresh(),this.enabled=!0},c.prototype.destroy=function(){return delete t[this.axis][this.id],delete this.context.waypoints[this.axis][this.id],this.context.checkEmpty()},c.getWaypointsByElement=function(d){var g,f;return(f=d[k])?(g=B.extend({},t.horizontal,t.vertical),B.map(f,function(h){return g[h]})):[]},c}(),H={init:function(c,f){var d;return f=B.extend({},B.fn[F].defaults,f),null==(d=f.handler)&&(f.handler=c),this.each(function(){var h,n,g,l;return h=B(this),g=null!=(l=f.context)?l:B.fn[F].defaults.context,B.isWindow(g)||(g=h.closest(g)),g=B(g),n=G[g[0][q]],n||(n=new A(g)),new C(h,n,f)}),B[e]("refresh"),this},disable:function(){return H._invoke.call(this,"disable")},enable:function(){return H._invoke.call(this,"enable")},destroy:function(){return H._invoke.call(this,"destroy")},prev:function(c,d){return H._traverse.call(this,c,d,function(f,g,h){if(g>0){return f.push(h[g-1])}})},next:function(c,d){return H._traverse.call(this,c,d,function(f,g,h){if(g<h.length-1){return f.push(h[g+1])}})},_traverse:function(f,g,d){var h,c;return null==f&&(f="vertical"),null==g&&(g=x),c=E.aggregate(g),h=[],this.each(function(){var i;return i=B.inArray(this,c[f]),d(h,i,c[f])}),this.pushStack(h)},_invoke:function(c){return this.each(function(){var d;return d=C.getWaypointsByElement(this),B.each(d,function(f,g){return g[c](),!0})}),this}},B.fn[F]=function(){var c,d;return d=arguments[0],c=2<=arguments.length?b.call(arguments,1):[],H[d]?H[d].apply(this,c):B.isFunction(d)?H.init.apply(this,arguments):B.isPlainObject(d)?H.init.apply(this,[null,d]):d?B.error("The "+d+" method does not exist in jQuery Waypoints."):B.error("jQuery Waypoints needs a callback function or handler option.")},B.fn[F].defaults={context:x,continuous:!0,enabled:!0,horizontal:!1,offset:0,triggerOnce:!1},E={refresh:function(){return B.each(G,function(c,d){return d.refresh()})},viewportHeight:function(){var c;return null!=(c=x.innerHeight)?c:D.height()},aggregate:function(d){var g,f,c;return g=t,d&&(g=null!=(c=G[B(d)[0][q]])?c.waypoints:void 0),g?(f={horizontal:[],vertical:[]},B.each(f,function(l,h){return B.each(g[l],function(i,n){return h.push(n)}),h.sort(function(i,n){return i.offset-n.offset}),f[l]=B.map(h,function(i){return i.element}),f[l]=B.unique(f[l])}),f):[]},above:function(c){return null==c&&(c=x),E._filter(c,"vertical",function(d,f){return f.offset<=d.oldScroll.y})},below:function(c){return null==c&&(c=x),E._filter(c,"vertical",function(d,f){return f.offset>d.oldScroll.y})},left:function(c){return null==c&&(c=x),E._filter(c,"horizontal",function(d,f){return f.offset<=d.oldScroll.x})},right:function(c){return null==c&&(c=x),E._filter(c,"horizontal",function(d,f){return f.offset>d.oldScroll.x})},enable:function(){return E._invoke("enable")},disable:function(){return E._invoke("disable")},destroy:function(){return E._invoke("destroy")},extendFn:function(c,d){return H[c]=d},_invoke:function(c){var d;return d=B.extend({},t.vertical,t.horizontal),B.each(d,function(f,g){return g[c](),!0})},_filter:function(d,g,f){var c,h;return(c=G[B(d)[0][q]])?(h=[],B.each(c.waypoints[g],function(i,l){if(f(c,l)){return h.push(l)}}),h.sort(function(i,l){return i.offset-l.offset}),B.map(h,function(i){return i.element})):[]}},B[e]=function(){var c,d;return d=arguments[0],c=2<=arguments.length?b.call(arguments,1):[],E[d]?E[d].apply(null,c):E.aggregate.call(null,d)},B[e].settings={resizeThrottle:100,scrollThrottle:30},D.on("load.waypoints",function(){return B[e]("refresh")})})}).call(this);
